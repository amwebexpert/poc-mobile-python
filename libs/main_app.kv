#: include libs/theme/theme.kv

#: import HomeScreen libs.features.home.home_screen.HomeScreen
#: import AboutScreen libs.features.about.about_screen.AboutScreen
#: import SettingsScreen libs.features.settings.settings_screen.SettingsScreen
#: import AIChatScreen libs.features.ai_chat.ai_chat_screen.AIChatScreen
#: import Text2ImgScreen libs.features.ai_text_to_img.text2img_screen.Text2ImgScreen
#: import AppNavigationBar libs.theme.app_navigation_bar.AppNavigationBar

<AppScreen>:
    AppNavigationBar:
        id: app_navigation_bar
        title: app.get_metadata()["name"]
        md_bg_color: app.theme_cls.primary_color
        pos_hint: {"top": 1}
        nav_drawer: nav_drawer
        screen_manager: screen_manager

    MDNavigationLayout:
        MDScreenManager:
            id: screen_manager
            HomeScreen:
                name: "home"
            AIChatScreen:
                name: "ai_chat"
            Text2ImgScreen:
                name: "text2img"
            SettingsScreen:
                name: "settings"
            AboutScreen:
                name: "about"
        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
            theme_text_color: "Primary"
            BoxLayout:
                orientation: "vertical"
                BoxLayout:
                    # orientation: "horizontal"
                    BoxLayout:
                        orientation: "vertical"
                        Label:
                            # size_hint_y:.1
                            text:""
                        Image:
                            size_hint_y:None
                            height:self.width

                            # canvas.before:
                            #     Color:
                            #         rgb: [.3,0.6,0]
                            #     Rectangle:
                            #         pos: self.pos
                            #         size: self.size
                            source: "libs/assets/logo-nav-drawer.png"
                            # size_hint_x: 1
                            # size: "300dp","200dp"
                            allow_stretch: True
                            keep_ratio: False  # This will stretch the im
                        Label:
                            text:""
                    BoxLayout:
                        orientation: "vertical"
                        # spacing:0
                        AnchorLayout:
                            anchor_y: "bottom"
                            MDLabel:
                                # canvas.before:
                                #     Color:
                                #         rgb: [.3,0.6,0]
                                #     Rectangle:
                                #         pos: self.pos
                                #         size: self.size
                                text: app.get_metadata()["name"]
                                font_style: "H4"
                                # valign: 'bottom'
                                size_hint_y: None  # Allows vertical size to be freely adjusted.
                                height: self.texture_size[1]  # Using
                        AnchorLayout:
                            anchor_y: "top"
                            MDLabel:
                                # canvas.before:
                                #     Color:
                                #         rgb: [.3,0.1,0.6]
                                #     Rectangle:
                                #         pos: self.pos
                                #         size: self.size
                                text: app.get_metadata()["description"]
                                # padding:0
                                size_hint_y: None  # Allows vertical size to be freely adjusted.
                                height: self.texture_size[1]  # Using

            # MDNavigationDrawerMenu:
            #     MDNavigationDrawerHeader:
            #         canvas.before:
            #             Color:
            #                 rgb: [100/255,0.6,0]
            #             Rectangle:
            #                 pos: self.pos
            #                 size: self.size
            #         source: "libs/assets/logo-nav-drawer.png"
            #         title: app.get_metadata()["name"]
            #         text: app.get_metadata()["description"]
            #         text_font_style: "Body1"
            #         # spacing: "4dp"
            #         # padding: 0, 0, 0, "32dp"
                MDNavigationDrawerItem:
                    icon: "home"
                    text: "Home"
                    theme_text_color: "Primary"
                    on_release: app_navigation_bar.navigate_to("home")
                MDNavigationDrawerItem:
                    icon: "chat"
                    text: "ChatGPT"
                    theme_text_color: "Primary"
                    on_release: app_navigation_bar.navigate_to("ai_chat")
                MDNavigationDrawerItem:
                    icon: "image"
                    text: "Image generator"
                    theme_text_color: "Primary"
                    on_release: app_navigation_bar.navigate_to("text2img")
                MDNavigationDrawerItem:
                    icon: "cog"
                    text: "Settings"
                    theme_text_color: "Primary"
                    on_release: app_navigation_bar.navigate_to("settings")
                MDNavigationDrawerItem:
                    icon: "information"
                    text: "About this appâ€¦"
                    theme_text_color: "Primary"
                    on_release: app_navigation_bar.navigate_to("about")
                MDNavigationDrawerDivider:
                MDNavigationDrawerItem:
                    icon: "exit-to-app"
                    text: "Exit"
                    theme_text_color: "Primary"
                    on_release:
                        app_navigation_bar.close_menu()
                        app.exit()
